{
    "sourceFile": "src/main/java/com/vincent/inc/Saturday/util/Http/HttpExceptionResponse.java",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1689363888189,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1689363931345,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,73 @@\n+package com.vincent.inc.Saturday.util.Http;\r\n+\r\n+import org.springframework.web.server.ResponseStatusException;\r\n+\r\n+import com.vincent.inc.Saturday.util.Time;\r\n+\r\n+import lombok.AllArgsConstructor;\r\n+import lombok.Builder;\r\n+import lombok.Data;\r\n+\r\n+@Data\r\n+@AllArgsConstructor\r\n+@Builder\r\n+public class HttpExceptionResponse {\r\n+    private String UUID;\r\n+    private String time;\r\n+    private HttpStatus status;\r\n+    private String message;\r\n+    private String detailMessageCode;\r\n+    private String reason;\r\n+    private String localizedMessage;\r\n+\r\n+    private final static String CUT_MESSAGE1 = \"\\\"message\\\":\";\r\n+    private final static String CUT_MESSAGE2 = \"\\\\\\\"\";\r\n+\r\n+    public HttpExceptionResponse() {\r\n+        this.UUID = java.util.UUID.randomUUID().toString();\r\n+        this.time = Time.now().toSpring();\r\n+    }\r\n+\r\n+    public HttpExceptionResponse(ResponseStatusException ex) {\r\n+        this.UUID = java.util.UUID.randomUUID().toString();\r\n+        this.time = Time.now().toSpring();\r\n+        this. message = extractMessage(ex.getMessage());\r\n+        this.status = new HttpStatus(ex.getStatusCode());\r\n+        this.reason = ex.getReason();\r\n+        this.localizedMessage = ex.getLocalizedMessage();\r\n+        this.detailMessageCode = ex.getDetailMessageCode();\r\n+    }\r\n+\r\n+    public static String extractMessage(String originMessage) {\r\n+        var newMessage = originMessage;\r\n+\r\n+        var index = newMessage.indexOf(CUT_MESSAGE1);\r\n+\r\n+        if(index < 0)\r\n+            return originMessage;\r\n+\r\n+        newMessage = newMessage.substring(index + CUT_MESSAGE1.length());\r\n+\r\n+        index = newMessage.indexOf(CUT_MESSAGE2);\r\n+\r\n+        if(index < 0)\r\n+            return originMessage;\r\n+\r\n+        newMessage = newMessage.substring(index + CUT_MESSAGE2.length());\r\n+\r\n+        index = newMessage.indexOf(CUT_MESSAGE2);\r\n+        \r\n+        if(index < 0)\r\n+            return originMessage;\r\n+\r\n+        newMessage = newMessage.substring(0, index);\r\n+\r\n+        return newMessage;\r\n+    }\r\n+\r\n+    public void mask() {\r\n+        this.reason = null;\r\n+        this.localizedMessage = null;\r\n+        this.detailMessageCode = null;\r\n+    }\r\n+}\r\n"
                }
            ],
            "date": 1689363888189,
            "name": "Commit-0",
            "content": "package com.vincent.inc.Saturday.util.Http;\r\n\r\nimport org.springframework.web.server.ResponseStatusException;\r\n\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport vincentcorp.vshop.Authenticator.util.Time;\r\n\r\n@Data\r\n@AllArgsConstructor\r\n@Builder\r\npublic class HttpExceptionResponse {\r\n    private String UUID;\r\n    private String time;\r\n    private HttpStatus status;\r\n    private String message;\r\n    private String detailMessageCode;\r\n    private String reason;\r\n    private String localizedMessage;\r\n\r\n    private final static String CUT_MESSAGE1 = \"\\\"message\\\":\";\r\n    private final static String CUT_MESSAGE2 = \"\\\\\\\"\";\r\n\r\n    public HttpExceptionResponse() {\r\n        this.UUID = java.util.UUID.randomUUID().toString();\r\n        this.time = Time.now().toSpring();\r\n    }\r\n\r\n    public HttpExceptionResponse(ResponseStatusException ex) {\r\n        this.UUID = java.util.UUID.randomUUID().toString();\r\n        this.time = Time.now().toSpring();\r\n        this. message = extractMessage(ex.getMessage());\r\n        this.status = new HttpStatus(ex.getStatusCode());\r\n        this.reason = ex.getReason();\r\n        this.localizedMessage = ex.getLocalizedMessage();\r\n        this.detailMessageCode = ex.getDetailMessageCode();\r\n    }\r\n\r\n    public static String extractMessage(String originMessage) {\r\n        var newMessage = originMessage;\r\n\r\n        var index = newMessage.indexOf(CUT_MESSAGE1);\r\n\r\n        if(index < 0)\r\n            return originMessage;\r\n\r\n        newMessage = newMessage.substring(index + CUT_MESSAGE1.length());\r\n\r\n        index = newMessage.indexOf(CUT_MESSAGE2);\r\n\r\n        if(index < 0)\r\n            return originMessage;\r\n\r\n        newMessage = newMessage.substring(index + CUT_MESSAGE2.length());\r\n\r\n        index = newMessage.indexOf(CUT_MESSAGE2);\r\n        \r\n        if(index < 0)\r\n            return originMessage;\r\n\r\n        newMessage = newMessage.substring(0, index);\r\n\r\n        return newMessage;\r\n    }\r\n\r\n    public void mask() {\r\n        this.reason = null;\r\n        this.localizedMessage = null;\r\n        this.detailMessageCode = null;\r\n    }\r\n}\r\n"
        }
    ]
}